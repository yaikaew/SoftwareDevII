{% extends "layouts/base_select_subject.html" %}

{% block title %} Select Subject page {% endblock %}

{% block content %}

{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">

<style>
    body,
    html {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #ffffff !important;
    }
</style>

<div class="container">
    <div class="timetable-img text-center">
        <img src="img/content/timetable.png" alt="">
    </div>
    <div class="table-responsive">
        <table class="table table-bordered text-center">
            <thead>
                <tr class="bg-light-gray">
                    <th class="text-uppercase">Time
                    </th>
                    <th class="text-uppercase">9:00-10:00</th>
                    <th class="text-uppercase">10:00-11:00</th>
                    <th class="text-uppercase">11:00-12:00</th>
                    <th class="text-uppercase">Break</th>
                    <th class="text-uppercase">13:00-14:00</th>
                    <th class="text-uppercase">14:00-15:00</th>
                    <th class="text-uppercase">15:00-16:00</th>
                    <th class="text-uppercase">16:00-17:00</th>
                    <th class="text-uppercase">17:00-18:00</th>
                    <th class="text-uppercase">18:00-19:00</th>
                    <th class="text-uppercase">19:00-20:00</th>
                </tr>
            </thead>
            <tbody>
                <tr>
    
                    <td class="align-middle">Monday</td>
                    {%for row in users %}
                    {%if row.sub_id.day == 'M' and row.sub_id.start_time|time:"H:i:s" == "09:00:00" %}
                    <td>
                        <span
                            class="text-black font-size16 xs-font-size16">{{row.sub_id.name}}</span>
                        <div class="margin-10px-top font-size14">{{row.sub_id.code}}</div>
                        <div class="font-size13 text-light-gray">{{row.sub_id.prof}}</div>
                    <form method="post" action="{% url 'selects_subject' %}" name="delete_btn">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{ row.sub_id.id }}">
                        <button type="submit" class="delete_btn" name="delete_btn">Delete</button>
                    </form>
                    </td>
                    {%endif%}

                    {%if row.sub_id.day == 'M' and row.sub_id.start_time|time:"H:i:s" == "10:00:00" %}
                    <td>
                        <span
                            class="text-black font-size16 xs-font-size16">{{row.sub_id.name}}</span>
                        <div class="margin-10px-top font-size14">{{row.sub_id.code}}</div>
                        <div class="font-size13 text-light-gray">{{row.sub_id.prof}}</div>
                    <form method="post" action="{% url 'selects_subject' %}" name="delete_btn">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{ row.sub_id.id }}">
                        <button type="submit" class="delete_btn" name="delete_btn">Delete</button>
                    </form>
                    </td>
                    {%endif%}
 


                    {%endfor%}


                </tr>

                <tr>
                    <td class="align-middle">Tuesday</td>
                    {%for row in users %}
                    {%if row.sub_id.day == 'T' %}
                    <td>
                        <span
                            class="text-black font-size16 xs-font-size16">{{row.sub_id.name}}</span>
                        <div class="margin-10px-top font-size14">{{row.sub_id.code}}</div>
                        <div class="font-size13 text-light-gray">{{row.sub_id.prof}}</div>
                        
                        <form method="post" action="{% url 'selects_subject' %}" name="delete_btn">
                            {% csrf_token %}
                            <input type="hidden" name="id" value="{{ row.sub_id.id }}">
                            <button type="submit" class="delete_btn" name="delete_btn">Delete</button>
                        </form>

                    </td>
                    {%endif%}
                    {%endfor%}
                </tr>

                <tr>
                    <td class="align-middle">Wednesday</td>
                    {%for row in users %}
                    {%if row.sub_id.day == 'W' %}
                    <td>
                        <span
                            class="text-black font-size16 xs-font-size16">{{row.sub_id.name}}</span>
                        <div class="margin-10px-top font-size14">{{row.sub_id.code}}</div>
                        <div class="font-size13 text-light-gray">{{row.sub_id.prof}}</div>
                        
                        <form method="post" action="{% url 'selects_subject' %}" name="delete_btn">
                            {% csrf_token %}
                            <input type="hidden" name="id" value="{{ row.sub_id.id }}">
                            <button type="submit" class="delete_btn" name="delete_btn">Delete</button>
                        </form>

                    </td>
                    {%endif%}
                    {%endfor%}
                </tr>

                <tr>
                    <td class="align-middle">Thursday</td>
                    {%for row in users %}
                    {%if row.sub_id.day == 'H' %}
                    <td>
                        <span
                            class="text-black font-size16 xs-font-size16">{{row.sub_id.name}}</span>
                        <div class="margin-10px-top font-size14">{{row.sub_id.code}}</div>
                        <div class="font-size13 text-light-gray">{{row.sub_id.prof}}</div>
                        
                        <form method="post" action="{% url 'selects_subject' %}" name="delete_btn">
                            {% csrf_token %}
                            <input type="hidden" name="id" value="{{ row.sub_id.id }}">
                            <button type="submit" class="delete_btn" name="delete_btn">Delete</button>
                        </form>

                    </td>
                    {%endif%}
                    {%endfor%}
                </tr>

                <tr>
                    <td class="align-middle">Friday</td>
                    {%for row in users %}
                    {%if row.sub_id.day == 'F' %}
                    <td>
                        <span
                            class="text-black font-size16 xs-font-size16">{{row.sub_id.name}}</span>
                        <div class="margin-10px-top font-size14">{{row.sub_id.code}}</div>
                        <div class="font-size13 text-light-gray">{{row.sub_id.prof}}</div>
                        
                        <form method="post" action="{% url 'selects_subject' %}" name="delete_btn">
                            {% csrf_token %}
                            <input type="hidden" name="id" value="{{ row.sub_id.id }}">
                            <button type="submit" class="delete_btn" name="delete_btn">Delete</button>
                        </form>

                    </td>
                    {%endif%}
                    {%endfor%}
                </tr>
            </tbody>
        </table>
    </div>
 

    <div class="mt-4">

        <h1> ค้นหาวิชา </h1>

        <form class="form-inline my-2 my-lg-0">
            <div class="input-group mb-3">
                <input class="form-control" name="q" type="search" placeholder="Search" aria-label="Search">
                <button class="search_btn" type="submit">Search</button>
            </div>
        </form>

        {%for row in sub_name %}
        <div class="mt-2">
            <div class="card w-100">
                <div class="card-body">
                    <div class="input-group mb-3">
                        <h5 class="card-title">{{row.code}} </h5>&nbsp;&nbsp;&nbsp;
                        <h5 class="card-title">{{row.name}} </h5>&nbsp;&nbsp;&nbsp;
                        <h5 class="card-title">{{row.prof}} </h5>&nbsp;&nbsp;&nbsp;
                        <p class="card-text"></p>
                    </div>
                    <form method="post" action="{% url 'selects_subject' %}">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{ row.id }}">
                        <button type="submit" class="select_btn" name="select_btn">Select</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}

    </div>

    <div class="mt-4">

        <h1> วิชาที่สามารถลงได้ในเทอมนี้ </h1>

        {% for row in sub_objects %}
        <div class="mt-2">
            <div class="card w-100">
                <div class="card-body">
                    <div class="input-group mb-3">
                        <h5 class="card-title"> {{row.code}} </h5> &nbsp;&nbsp;&nbsp;
                        <h5 class="card-title"> {{row.name}} </h5> &nbsp;&nbsp;&nbsp;
                        <h5 class="card-title"> {{row.prof}} </h5> &nbsp;&nbsp;&nbsp;
                        <p class="card-text"></p>
                    </div>
                    <form method="post" action="{% url 'selects_subject' %}" >
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{ row.id }}">
                        <button type="submit" class="select_btn" name="select_btn">Select</button>
                    </form>
            {% for user in users %}
                {% if user.sub_id.code == row.code and user.sub_id.section == row.section and user.sub_id.prof == row.prof %}
                    <form method="post" action="{% url 'selects_subject' %}" name="delete_btn">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{ row.id }}">
                        <button type="submit" class="delete_btn" name="delete_btn">Delete</button>
                    </form>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>

        
        {% endfor %}

    </div>
</div>



{% endblock %}